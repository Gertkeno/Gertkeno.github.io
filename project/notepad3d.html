<!DOCTYPE html>
<html>
	<head>
		<title>Project Page: Notepad 3D</title>
		<link href="project.css" rel="stylesheet" type="text/css">
		<meta charset="utf-8">
	</head>
	<body>
		<h1>Notepad 3D</h1>
		<h2>Legend</h2>
		<ul>
			<li><a href="#Preamble">The Illegible Text Editor</a></li>
			<li><a href="#Making-of">Making A Text Editor</a></li>
			<li><a href="#Meshes">The Alphabet 3D</a></li>
			<li><a href="#Downloads">Downloads &amp; Plans</a></li>
		</ul>
		<h2 id="Preamble">The Illegible Text Editor</h2>
		<p>Let's just start this one with an example.</p>
		<iframe width="560" height="315" src="https://www.youtube.com/embed/2uXGnX5MTKs?rel=0" frameborder="0" allowfullscreen></iframe>
		<p>Jumping right in you might ask for my motivation, and I do have half a good reason for doing this. Good half: there's a great streamer on twitch called <a href="https://www.twitch.tv/kitboga">Kitboga</a>, they call tech support scammers and attempts to waste their time.</p>
		<p>On good days the scammers will attempt to use some of windows pre-packaged programs to lock up Kitboga's computer.</p>
		<iframe src="https://clips.twitch.tv/embed?clip=ClumsySpookyLardOMGScoots&autoplay=false&tt_medium=clips_embed" width="640" height="360" frameborder="0" scrolling="no" allowfullscreen="true"></iframe>
		<p>Now if you have a keen eye, good knowledge of how self destructive windows is, and watched the above clip you'll see the <a href="https://en.wikipedia.org/wiki/Syskey#Malicious_use">syskey</a> program was intentionally replaced with a gag program.</p>
		<p>What I set out to do was create a <i>"reasonable"</i> replacement for the notorious Windows text editor. For the bad half: Shortly into the project I found out his virtual machine doesn't support my favorite OpenGL 3.2</p>
		<p>Pushing forward I decided it would still be a good test of compiling all my assets into the executable. Normally I'd use the <b>xxd -i</b> command to convert the binary data of a file to a C compile-able form, but if all my 3D files are in <a href="https://en.wikipedia.org/wiki/Wavefront_.obj_file#File_format">Wavefront Obj</a> format I figure making a specialized program would help.</p>
		<p>Thus my second gert prefixed project was born <a href="https://github.com/Gertkeno/gert-wavefrontc">gert-wavefrontc</a>, this skipped the run-time file parsing part of loading a 3D mesh. Basics of how it works is Wavefront happens to already be a close to compilable data format, just replace <b>v</b> with <b>float vertex[]</b>, <b>vt</b> with <b>float textureUV[]</b>, etc. It's very close to simple character swaps.</p>
		<br>
		<h2 id="Making-of">Making A Text Editor</h2>
		<p>Turns out making notepad isn't hard too do in a day. I started out with a single <span class="code">std::string</span> for each document and just loaded them with data from command line argument specified files.</p>
		<p>After loading files SDL2 makes it easy to append and remove text. The union SDL_Event allows for simple code like <span class="code">document += event.text.text</span> where <span class="code">document</span> is a std::string and <span class="code">event</span> is of type SDL_Event.</p>
		<p>Absolute basics are covered: append text, delete text, all you literally <i>need</i> right? I immediately wanted to add some odd function calls from the keyboard, SDL2 once again coming to the rescue lets this long, expandable chain of if statements do what ever I'd like them to.</p>
		<div class="code">
	if( (SDL_GetModState() &amp; KMOD_LCTRL) != KMOD_LCTRL ) break;
	if( _event.key.keysym.sym == SDLK_p )
	{
		std::cerr << "[Manager] Reading from active document(" << ACTIVE_COUNT <<"):";
		std::cout << _docs[_activeDoc].get_file() << std::endl;
	}
	else if( _event.key.keysym.sym == SDLK_q )
	{
		living = false;
	}
	else if( _event.key.keysym.sym == SDLK_n )
	{
		make_document( nullptr );
	}
	else if( _event.key.keysym.sym == SDLK_w )
	{
		close_document();
	}
	else if( _event.key.keysym.sym == SDLK_j )
	{
		if( _activeDoc <= 0 )break;
		--_activeDoc;
		std::cerr << "[Manager] Down to document " << ACTIVE_COUNT << std::endl;
	}
	else if( _event.key.keysym.sym == SDLK_k )
	{
		if( _activeDoc >= _docs.size()-1 ) break;
		++_activeDoc;
		std::cerr << "[Manager] Up to document " << ACTIVE_COUNT << std::endl;
	}
		</div>
		<p>The first statement, <span class="code">if( (SDL_GetModState() &amp; KMOD_LCTRL) != KMOD_LCTRL ) break;</span> checks if the left control key <span class="code">KMOD_LCTRL</span> is held down via bitwise operators and the <span class="code">SDL_GetModState()</span> function. If said key isn't held down it won't execute the code below, since it's all breakable from the switch statement above. If you want more context here's a link to this <a href="https://bitbucket.org/Gertkeno/notepad3d/src/014215017445572e9f2f53b5d4b0d84dd40e86c9/src/Manager.cpp?at=master&fileviewer=file-view-default#Manager.cpp-56">line in the file src/Manager.cpp</a></p>
		<p>Majority of these special control hotkeys aren't useful, at least not for text editing. The Ctrl-P hotkey just prints the current document to cout, really helpful when I was debugging, at best you can pipe this to a file for writing. Ctrl-Q quits, very nice if you're using <a href="https://i3wm.org/">i3-wm</a> don't have the X to close. Then there's the document management hotkeys, these would be useful if I added saving directly to file.</p>
		<p>Now if I tried to add file saving I'd have to make some kind of temporary text to get a filename, which would only be difficult due to adding a "Document write" mode and a "Filename write" mode. I'd have to split my draw function, and text capture function into two parts.</p>
		<p>Modal programming isn't always hard, this case wouldn't be either, but I know I'd try to make a more robust system than is needed for a intentionally bad project. I still had to make all the 3D models and render them, so I felt like focusing on getting that done.</p>
		<br>
		<h2 id="Meshes">The Alphabet 3D</h2>
		<table>
			<tr>
				<td><iframe width="270" height="415" src="https://www.youtube.com/embed/64JDEpR1RyA?rel=0" frameborder="0" allowfullscreen></iframe></td>
				<td>
					<p><sup>Sorry for the Snapchat screencap.</sup></p>
					<p>With the first letter of my alphabet done I tested it's rotational glory, by using A instead of any character typed.</p>
					<p>I decided my character set would be minimally ambitious and set out to make models for A-Z and 0-9. Later I found that punctuation really ties a lot of writing together so I added special characters <span class="code">. - = ! $</span></p>
					<p>If you want to use this barely complete 3D alphabet I'd recommend just downloading the repository as zip <a href="https://bitbucket.org/Gertkeno/notepad3d/downloads/">here</a>. I include Wavefront and C compileable formats.</p>
				</td>
			</tr>
		</table>
		<p>Since I need more data to do 3D characters I switch from <span class="code">std::string</span> per document to a <span class="code">std::vector</span> of my custom class. The custom character class just needs variables to make it spin. Giving it two floats for animation timing and animation speed, and a vector axis to spin on.</p>
		<p>Eventually I turned the background white to match classic notepad with the regular <span class="code">glClearColor()</span> and <span class="code">glClear()</span> functions.</p>
		<br>
		<h2 id="Downloads">Downloads &amp; Plans</h2>
		<p><a href="https://bitbucket.org/Gertkeno/notepad3d/downloads/">Downloads hosted on BitBucket</a></p>
		<p>If you intend to actually use this to edit and save files wait for major release 1. More likely if you just want to view a file in the worst way possible go ahead and pick the highest release candidate, marked notepad3d_rc#.zip</p>

		<p>Intended features for major 1 are as follow</p>
		<ul>
			<li>Opening files</li>
			<ul>
				<li>&#10003; As command line arguments</li>
				<li>In-app</li>
			</ul>
			<li>Saving files in-app</li>
			<li>&#10003; Text rotates</li>
			<li>&#10003; Multiple document management</li>
		</ul>
	</body>
</html>
